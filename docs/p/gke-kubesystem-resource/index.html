<!DOCTYPE html>
<html lang="ja" dir="ltr">
    <head><meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1'><meta name='description' content='ã‚ã¾ã‚Šæ„è­˜ã—ã¦ã“ãªã‹ã£ãŸ kube-system ã‚’è¦—ãã«ã„ãğŸ‘'>
<title>GKE ã® kube-system ãƒªã‚½ãƒ¼ã‚¹ã‚’ã–ã£ãã‚Šç†è§£ã™ã‚‹</title>

<link rel='canonical' href='https://blaaackard.com/p/gke-kubesystem-resource/'>

<link rel="stylesheet" href="https://blaaackard.com/scss/style.min.20283f2bf7c64b49e43800f217fe7b1a7a3119e863321c52ce0e477d1175e164.css"><meta property='og:title' content='GKE ã® kube-system ãƒªã‚½ãƒ¼ã‚¹ã‚’ã–ã£ãã‚Šç†è§£ã™ã‚‹'>
<meta property='og:description' content='ã‚ã¾ã‚Šæ„è­˜ã—ã¦ã“ãªã‹ã£ãŸ kube-system ã‚’è¦—ãã«ã„ãğŸ‘'>
<meta property='og:url' content='https://blaaackard.com/p/gke-kubesystem-resource/'>
<meta property='og:site_name' content='Penta&#39;s TechBlog'>
<meta property='og:type' content='article'><meta property='article:section' content='Post' /><meta property='article:tag' content='Kubernetes' /><meta property='article:tag' content='Google Cloud' /><meta property='article:tag' content='GKE' /><meta property='article:published_time' content='2023-10-08T15:38:34&#43;09:00'/><meta property='article:modified_time' content='2023-10-08T15:38:34&#43;09:00'/><meta property='og:image' content='https://blaaackard.com/p/gke-kubesystem-resource/cover.png' />
<meta name="twitter:title" content="GKE ã® kube-system ãƒªã‚½ãƒ¼ã‚¹ã‚’ã–ã£ãã‚Šç†è§£ã™ã‚‹">
<meta name="twitter:description" content="ã‚ã¾ã‚Šæ„è­˜ã—ã¦ã“ãªã‹ã£ãŸ kube-system ã‚’è¦—ãã«ã„ãğŸ‘"><meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content='https://blaaackard.com/p/gke-kubesystem-resource/cover.png' />
    <link rel="shortcut icon" href="https://blaaackard.com/img/favicon.ico" />


    <script async src="https://www.googletagmanager.com/gtag/js?id="></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());

        gtag('config', 'G-6003CC5K8B');
    </script>

    </head>
    <body class="
    article-page
    ">
    <script>
        (function() {
            const colorSchemeKey = 'StackColorScheme';
            if(!localStorage.getItem(colorSchemeKey)){
                localStorage.setItem(colorSchemeKey, "auto");
            }
        })();
    </script><script>
    (function() {
        const colorSchemeKey = 'StackColorScheme';
        const colorSchemeItem = localStorage.getItem(colorSchemeKey);
        const supportDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches === true;

        if (colorSchemeItem == 'dark' || colorSchemeItem === 'auto' && supportDarkMode) {
            

            document.documentElement.dataset.scheme = 'dark';
        } else {
            document.documentElement.dataset.scheme = 'light';
        }
    })();
</script>
<div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky ">
    <button class="hamburger hamburger--spin" type="button" id="toggle-menu" aria-label="Toggle Menu">
        <span class="hamburger-box">
            <span class="hamburger-inner"></span>
        </span>
    </button>

    <header>
        
            
            <figure class="site-avatar">
                <a href="https://blaaackard.com/">
                
                    
                    
                    
                        
                        <img src="https://blaaackard.com/img/avatar_hud9397d267f3637cdf0b671d3c0947f4d_2718_300x0_resize_box_3.png" width="300"
                            height="414" class="site-logo" loading="lazy" alt="Avatar">
                    
                
                </a>
                
            </figure>
            
        
        
        <div class="site-meta">
            <h1 class="site-name"><a href="https://blaaackard.com/">Penta&#39;s TechBlog</a></h1>
            <h2 class="site-description"></h2>
        </div>
    </header><ol class="social-menu">
            
                <li>
                    <a 
                        href='https://twitter.com/BlaaacKard'
                        target="_blank"
                        title="Twitter"
                        rel="me"
                    >
                        
                        
                            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-twitter" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M22 4.01c-1 .49 -1.98 .689 -3 .99c-1.121 -1.265 -2.783 -1.335 -4.38 -.737s-2.643 2.06 -2.62 3.737v1c-3.245 .083 -6.135 -1.395 -8 -4c0 0 -4.182 7.433 4 11c-1.872 1.247 -3.739 2.088 -6 2c3.308 1.803 6.913 2.423 10.034 1.517c3.58 -1.04 6.522 -3.723 7.651 -7.742a13.84 13.84 0 0 0 .497 -3.753c-.002 -.249 1.51 -2.772 1.818 -4.013z" />
</svg>



                        
                    </a>
                </li>
            
        </ol><ol class="menu" id="main-menu">
        
        
        
        <li >
            <a href='https://blaaackard.com/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <polyline points="5 12 3 12 12 3 21 12 19 12" />
  <path d="M5 12v7a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-7" />
  <path d="M9 21v-6a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v6" />
</svg>



                
                <span>Home</span>
            </a>
        </li>
        
        
        <li >
            <a href='https://blaaackard.com/archives/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <rect x="3" y="4" width="18" height="4" rx="2" />
  <path d="M5 8v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-10" />
  <line x1="10" y1="12" x2="14" y2="12" />
</svg>



                
                <span>Archives</span>
            </a>
        </li>
        
        
        <li >
            <a href='https://blaaackard.com/search/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="10" cy="10" r="7" />
  <line x1="21" y1="21" x2="15" y2="15" />
</svg>



                
                <span>Search</span>
            </a>
        </li>
        
        
        <li >
            <a href='https://blaaackard.com/links/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5" />
  <path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5" />
</svg>



                
                <span>Links</span>
            </a>
        </li>
        
        
        <li >
            <a href='' target="_blank">
                
                
                
                <span></span>
            </a>
        </li>
        

        <div class="menu-bottom-section">
            
            
                <li id="dark-mode-toggle">
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="8" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="16" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                    <span>Dark Mode</span>
                </li>
            
        </div>
    </ol>
</aside>

    <aside class="sidebar right-sidebar sticky">
        
            
                
    <section class="widget archives">
        <div class="widget-icon">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <line x1="5" y1="9" x2="19" y2="9" />
  <line x1="5" y1="15" x2="19" y2="15" />
  <line x1="11" y1="4" x2="7" y2="20" />
  <line x1="17" y1="4" x2="13" y2="20" />
</svg>



        </div>
        <h2 class="widget-title section-title">Table of contents</h2>
        
        <div class="widget--toc">
            <nav id="TableOfContents">
  <ol>
    <li><a href="#deployment">Deployment</a>
      <ol>
        <li><a href="#event-exporter-gke">event-exporter-gke</a></li>
        <li><a href="#konnectivity-agent">konnectivity-agent</a></li>
        <li><a href="#kube-dns">kube-dns</a></li>
        <li><a href="#l7-default-backend">l7-default-backend</a></li>
        <li><a href="#metrics-server">metrics-server</a></li>
      </ol>
    </li>
    <li><a href="#daemonset">Daemonset</a>
      <ol>
        <li><a href="#fluentbit-gke">fluentbit-gke</a></li>
        <li><a href="#gke-metrics-agent">gke-metrics-agent</a></li>
        <li><a href="#kube-proxy">kube-proxy</a></li>
        <li><a href="#metadata-proxy">metadata-proxy</a></li>
        <li><a href="#nccl-fastsocket-installer">nccl-fastsocket-installer</a></li>
        <li><a href="#nvidia-gpu-device-plugin">nvidia-gpu-device-plugin</a></li>
        <li><a href="#pdcsi-node">pdcsi-node</a></li>
        <li><a href="#runsc-metric-server">runsc-metric-server</a></li>
        <li><a href="#tpu-device-plugin">tpu-device-plugin</a></li>
      </ol>
    </li>
  </ol>
</nav>
        </div>
    </section>

            
        
    </aside>


            <main class="main full-width">
    <article class="has-image main-article">
    <header class="article-header">
        <div class="article-image">
            <a href="https://blaaackard.com/p/gke-kubesystem-resource/">
                <img src="https://blaaackard.com/p/gke-kubesystem-resource/cover_hu55a857987ee61949054669d80844a31c_2738055_800x0_resize_box_3.png"
                        srcset="https://blaaackard.com/p/gke-kubesystem-resource/cover_hu55a857987ee61949054669d80844a31c_2738055_800x0_resize_box_3.png 800w, https://blaaackard.com/p/gke-kubesystem-resource/cover_hu55a857987ee61949054669d80844a31c_2738055_1600x0_resize_box_3.png 1600w"
                        width="800" 
                        height="450" 
                        loading="lazy"
                        alt="Featured image of post GKE ã® kube-system ãƒªã‚½ãƒ¼ã‚¹ã‚’ã–ã£ãã‚Šç†è§£ã™ã‚‹" />
                
            </a>
        </div>
    

    <div class="article-details">
    
    <header class="article-category">
        
            <a href="https://blaaackard.com/categories/kubernetes/" style="background-color: #00a1e9; color: #fff;">
                Kubernetes
            </a>
        
            <a href="https://blaaackard.com/categories/google-cloud/" >
                Google Cloud
            </a>
        
    </header>
    

    <div class="article-title-wrapper">
        <h2 class="article-title">
            <a href="https://blaaackard.com/p/gke-kubesystem-resource/">GKE ã® kube-system ãƒªã‚½ãƒ¼ã‚¹ã‚’ã–ã£ãã‚Šç†è§£ã™ã‚‹</a>
        </h2>
    
        
        <h3 class="article-subtitle">
            ã‚ã¾ã‚Šæ„è­˜ã—ã¦ã“ãªã‹ã£ãŸ kube-system ã‚’è¦—ãã«ã„ãğŸ‘
        </h3>
        
    </div>

    
    
    
    
    <footer class="article-time">
        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M11.795 21h-6.795a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v4" />
  <circle cx="18" cy="18" r="4" />
  <path d="M15 3v4" />
  <path d="M7 3v4" />
  <path d="M3 11h16" />
  <path d="M18 16.496v1.504l1 1" />
</svg>
                <time class="article-time--published">Oct 08, 2023</time>
            </div>
        

        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <polyline points="12 7 12 12 15 15" />
</svg>



                <time class="article-time--reading">
                    5 minute read
                </time>
            </div>
        
    </footer>
    

    
</div>

</header>

    <section class="article-content">
    
    
    <h1 id="æœ€åˆã«">æœ€åˆã«</h1>
<p>Kubernetesåˆå¿ƒè€…ã®ç§ã¯ç‰¹ã«Namespaceã€Œ<strong>kube-system</strong>ã€ã«ã‚ã‚‹ãƒªã‚½ãƒ¼ã‚¹ã«ã¤ã„ã¦æ„è­˜ã›ãšã«æ¥­å‹™ã‚’é€²ã‚ã¦ã„ã¾ã—ãŸã€‚<br>
ãã“ã§ä»Šå›ã¯GKE(Google Cloud Kubernetes Engine)ã§ã‚¯ãƒ©ã‚¹ã‚¿æ§‹ç¯‰æ™‚ã«å‹æ‰‹ã«ä½œæˆã•ã‚Œã‚‹ãƒªã‚½ãƒ¼ã‚¹ãŒã©ã®ã‚ˆã†ãªåƒãã‚’ã—ã¦ã„ã‚‹ã®ã‹é›‘ã«ã¾ã¨ã‚ã¦ã¿ã‚‹ã“ã¨ã«ã—ã¾ã—ãŸã€‚</p>
<p>ã¾ãšã¯ã‚¯ãƒ©ã‚¹ã‚¿ã‚’æ§‹ç¯‰ã—ã¦ã€ã€ã€  ç‰¹ã«ä½•ã‚‚ãƒ‡ãƒ—ãƒ­ã‚¤ã›ãšã«<code>k get all</code>ã‚’ã—ã¾ã™ã€‚</p>
<details>
<summary>å®Ÿè¡Œçµæœ</summary>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">â¯ k get all -n kube-system
</span></span><span class="line"><span class="cl">NAME                                                              READY   STATUS    RESTARTS   AGE
</span></span><span class="line"><span class="cl">pod/event-exporter-gke-7bf6c99dcb-ddh8w                           2/2     Running   <span class="m">0</span>          3m14s
</span></span><span class="line"><span class="cl">pod/fluentbit-gke-sdpcc                                           2/2     Running   <span class="m">0</span>          2m14s
</span></span><span class="line"><span class="cl">pod/gke-metrics-agent-mztgr                                       2/2     Running   <span class="m">0</span>          2m14s
</span></span><span class="line"><span class="cl">pod/konnectivity-agent-69fc69d588-t67rj                           1/1     Running   <span class="m">0</span>          3m3s
</span></span><span class="line"><span class="cl">pod/konnectivity-agent-autoscaler-5d9dbcc6d8-2qlgw                1/1     Running   <span class="m">0</span>          3m2s
</span></span><span class="line"><span class="cl">pod/kube-dns-5bfd847c64-p6tgx                                     4/4     Running   <span class="m">0</span>          3m22s
</span></span><span class="line"><span class="cl">pod/kube-dns-autoscaler-84b8db4dc7-2sjtc                          1/1     Running   <span class="m">0</span>          3m21s
</span></span><span class="line"><span class="cl">pod/kube-proxy-gke-cn-matsuirut-temp-default-pool-14ae721e-qj9s   1/1     Running   <span class="m">0</span>          72s
</span></span><span class="line"><span class="cl">pod/l7-default-backend-d86c96845-nj87m                            1/1     Running   <span class="m">0</span>          3m
</span></span><span class="line"><span class="cl">pod/metrics-server-v0.5.2-6bf74b5d5f-wvrqq                        2/2     Running   <span class="m">0</span>          91s
</span></span><span class="line"><span class="cl">pod/pdcsi-node-pvztw                                              2/2     Running   <span class="m">0</span>          2m14s
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">NAME                           TYPE        CLUSTER-IP      EXTERNAL-IP   PORT<span class="o">(</span>S<span class="o">)</span>         AGE
</span></span><span class="line"><span class="cl">service/default-http-backend   NodePort    10.248.14.194   &lt;none&gt;        80:30274/TCP    2m59s
</span></span><span class="line"><span class="cl">service/kube-dns               ClusterIP   10.248.0.10     &lt;none&gt;        53/UDP,53/TCP   3m23s
</span></span><span class="line"><span class="cl">service/metrics-server         ClusterIP   10.248.8.65     &lt;none&gt;        443/TCP         2m50s
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">NAME                                                    DESIRED   CURRENT   READY   UP-TO-DATE   AVAILABLE   NODE SELECTOR                                                        AGE
</span></span><span class="line"><span class="cl">daemonset.apps/fluentbit-gke                            <span class="m">1</span>         <span class="m">1</span>         <span class="m">1</span>       <span class="m">1</span>            <span class="m">1</span>           kubernetes.io/os<span class="o">=</span>linux                                               3m12s
</span></span><span class="line"><span class="cl">daemonset.apps/fluentbit-gke-256pd                      <span class="m">0</span>         <span class="m">0</span>         <span class="m">0</span>       <span class="m">0</span>            <span class="m">0</span>           kubernetes.io/os<span class="o">=</span>linux                                               3m12s
</span></span><span class="line"><span class="cl">daemonset.apps/fluentbit-gke-max                        <span class="m">0</span>         <span class="m">0</span>         <span class="m">0</span>       <span class="m">0</span>            <span class="m">0</span>           kubernetes.io/os<span class="o">=</span>linux                                               3m12s
</span></span><span class="line"><span class="cl">daemonset.apps/gke-metrics-agent                        <span class="m">1</span>         <span class="m">1</span>         <span class="m">1</span>       <span class="m">1</span>            <span class="m">1</span>           &lt;none&gt;                                                               3m8s
</span></span><span class="line"><span class="cl">daemonset.apps/gke-metrics-agent-scaling-10             <span class="m">0</span>         <span class="m">0</span>         <span class="m">0</span>       <span class="m">0</span>            <span class="m">0</span>           &lt;none&gt;                                                               3m8s
</span></span><span class="line"><span class="cl">daemonset.apps/gke-metrics-agent-scaling-100            <span class="m">0</span>         <span class="m">0</span>         <span class="m">0</span>       <span class="m">0</span>            <span class="m">0</span>           &lt;none&gt;                                                               3m7s
</span></span><span class="line"><span class="cl">daemonset.apps/gke-metrics-agent-scaling-20             <span class="m">0</span>         <span class="m">0</span>         <span class="m">0</span>       <span class="m">0</span>            <span class="m">0</span>           &lt;none&gt;                                                               3m7s
</span></span><span class="line"><span class="cl">daemonset.apps/gke-metrics-agent-scaling-200            <span class="m">0</span>         <span class="m">0</span>         <span class="m">0</span>       <span class="m">0</span>            <span class="m">0</span>           &lt;none&gt;                                                               3m7s
</span></span><span class="line"><span class="cl">daemonset.apps/gke-metrics-agent-scaling-50             <span class="m">0</span>         <span class="m">0</span>         <span class="m">0</span>       <span class="m">0</span>            <span class="m">0</span>           &lt;none&gt;                                                               3m7s
</span></span><span class="line"><span class="cl">daemonset.apps/gke-metrics-agent-scaling-500            <span class="m">0</span>         <span class="m">0</span>         <span class="m">0</span>       <span class="m">0</span>            <span class="m">0</span>           &lt;none&gt;                                                               3m6s
</span></span><span class="line"><span class="cl">daemonset.apps/gke-metrics-agent-windows                <span class="m">0</span>         <span class="m">0</span>         <span class="m">0</span>       <span class="m">0</span>            <span class="m">0</span>           kubernetes.io/os<span class="o">=</span>windows                                             3m6s
</span></span><span class="line"><span class="cl">daemonset.apps/kube-proxy                               <span class="m">0</span>         <span class="m">0</span>         <span class="m">0</span>       <span class="m">0</span>            <span class="m">0</span>           kubernetes.io/os<span class="o">=</span>linux,node.kubernetes.io/kube-proxy-ds-ready<span class="o">=</span><span class="nb">true</span>   2m38s
</span></span><span class="line"><span class="cl">daemonset.apps/metadata-proxy-v0.1                      <span class="m">0</span>         <span class="m">0</span>         <span class="m">0</span>       <span class="m">0</span>            <span class="m">0</span>           cloud.google.com/metadata-proxy-ready<span class="o">=</span>true,kubernetes.io/os<span class="o">=</span>linux    2m35s
</span></span><span class="line"><span class="cl">daemonset.apps/nccl-fastsocket-installer                <span class="m">0</span>         <span class="m">0</span>         <span class="m">0</span>       <span class="m">0</span>            <span class="m">0</span>           &lt;none&gt;                                                               2m49s
</span></span><span class="line"><span class="cl">daemonset.apps/nvidia-gpu-device-plugin-large-cos       <span class="m">0</span>         <span class="m">0</span>         <span class="m">0</span>       <span class="m">0</span>            <span class="m">0</span>           &lt;none&gt;                                                               3m5s
</span></span><span class="line"><span class="cl">daemonset.apps/nvidia-gpu-device-plugin-large-ubuntu    <span class="m">0</span>         <span class="m">0</span>         <span class="m">0</span>       <span class="m">0</span>            <span class="m">0</span>           &lt;none&gt;                                                               3m4s
</span></span><span class="line"><span class="cl">daemonset.apps/nvidia-gpu-device-plugin-medium-cos      <span class="m">0</span>         <span class="m">0</span>         <span class="m">0</span>       <span class="m">0</span>            <span class="m">0</span>           &lt;none&gt;                                                               3m6s
</span></span><span class="line"><span class="cl">daemonset.apps/nvidia-gpu-device-plugin-medium-ubuntu   <span class="m">0</span>         <span class="m">0</span>         <span class="m">0</span>       <span class="m">0</span>            <span class="m">0</span>           &lt;none&gt;                                                               3m5s
</span></span><span class="line"><span class="cl">daemonset.apps/nvidia-gpu-device-plugin-small-cos       <span class="m">0</span>         <span class="m">0</span>         <span class="m">0</span>       <span class="m">0</span>            <span class="m">0</span>           &lt;none&gt;                                                               3m6s
</span></span><span class="line"><span class="cl">daemonset.apps/nvidia-gpu-device-plugin-small-ubuntu    <span class="m">0</span>         <span class="m">0</span>         <span class="m">0</span>       <span class="m">0</span>            <span class="m">0</span>           &lt;none&gt;                                                               3m5s
</span></span><span class="line"><span class="cl">daemonset.apps/pdcsi-node                               <span class="m">1</span>         <span class="m">1</span>         <span class="m">1</span>       <span class="m">1</span>            <span class="m">1</span>           kubernetes.io/os<span class="o">=</span>linux                                               2m46s
</span></span><span class="line"><span class="cl">daemonset.apps/pdcsi-node-windows                       <span class="m">0</span>         <span class="m">0</span>         <span class="m">0</span>       <span class="m">0</span>            <span class="m">0</span>           kubernetes.io/os<span class="o">=</span>windows                                             2m45s
</span></span><span class="line"><span class="cl">daemonset.apps/runsc-metric-server                      <span class="m">0</span>         <span class="m">0</span>         <span class="m">0</span>       <span class="m">0</span>            <span class="m">0</span>           kubernetes.io/os<span class="o">=</span>linux,sandbox.gke.io/runtime<span class="o">=</span>gvisor                 3m20s
</span></span><span class="line"><span class="cl">daemonset.apps/tpu-device-plugin                        <span class="m">0</span>         <span class="m">0</span>         <span class="m">0</span>       <span class="m">0</span>            <span class="m">0</span>           &lt;none&gt;                                                               2m41s
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">NAME                                            READY   UP-TO-DATE   AVAILABLE   AGE
</span></span><span class="line"><span class="cl">deployment.apps/event-exporter-gke              1/1     <span class="m">1</span>            <span class="m">1</span>           3m15s
</span></span><span class="line"><span class="cl">deployment.apps/konnectivity-agent              1/1     <span class="m">1</span>            <span class="m">1</span>           3m4s
</span></span><span class="line"><span class="cl">deployment.apps/konnectivity-agent-autoscaler   1/1     <span class="m">1</span>            <span class="m">1</span>           3m3s
</span></span><span class="line"><span class="cl">deployment.apps/kube-dns                        1/1     <span class="m">1</span>            <span class="m">1</span>           3m24s
</span></span><span class="line"><span class="cl">deployment.apps/kube-dns-autoscaler             1/1     <span class="m">1</span>            <span class="m">1</span>           3m22s
</span></span><span class="line"><span class="cl">deployment.apps/l7-default-backend              1/1     <span class="m">1</span>            <span class="m">1</span>           3m1s
</span></span><span class="line"><span class="cl">deployment.apps/metrics-server-v0.5.2           1/1     <span class="m">1</span>            <span class="m">1</span>           2m50s
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">NAME                                                       DESIRED   CURRENT   READY   AGE
</span></span><span class="line"><span class="cl">replicaset.apps/event-exporter-gke-7bf6c99dcb              <span class="m">1</span>         <span class="m">1</span>         <span class="m">1</span>       3m15s
</span></span><span class="line"><span class="cl">replicaset.apps/konnectivity-agent-69fc69d588              <span class="m">1</span>         <span class="m">1</span>         <span class="m">1</span>       3m4s
</span></span><span class="line"><span class="cl">replicaset.apps/konnectivity-agent-autoscaler-5d9dbcc6d8   <span class="m">1</span>         <span class="m">1</span>         <span class="m">1</span>       3m3s
</span></span><span class="line"><span class="cl">replicaset.apps/kube-dns-5bfd847c64                        <span class="m">1</span>         <span class="m">1</span>         <span class="m">1</span>       3m23s
</span></span><span class="line"><span class="cl">replicaset.apps/kube-dns-autoscaler-84b8db4dc7             <span class="m">1</span>         <span class="m">1</span>         <span class="m">1</span>       3m22s
</span></span><span class="line"><span class="cl">replicaset.apps/l7-default-backend-d86c96845               <span class="m">1</span>         <span class="m">1</span>         <span class="m">1</span>       3m1s
</span></span><span class="line"><span class="cl">replicaset.apps/metrics-server-v0.5.2-6bf74b5d5f           <span class="m">1</span>         <span class="m">1</span>         <span class="m">1</span>       92s
</span></span><span class="line"><span class="cl">replicaset.apps/metrics-server-v0.5.2-8569bc4cf9           <span class="m">0</span>         <span class="m">0</span>         <span class="m">0</span>       2m50s
</span></span></code></pre></td></tr></table>
</div>
</div></details>
<p>æ²¢å±±ã‚ã‚Šã¾ã™ã­ã€ä¸€ã¤ãšã¤ãƒ¡ãƒ¢ãƒ¬ãƒ™ãƒ«ã§ã¾ã¨ã‚ã¦ã„ã“ã†ã‹ã¨æ€ã„ã¾ã™ã€‚<br>
æƒ…å ±é–“é•ã£ã¦ã„ãŸã‚‰ã™ã¿ã¾ã›ã‚“ã€‚</p>
<h2 id="deployment">Deployment</h2>
<h3 id="event-exporter-gke">event-exporter-gke</h3>
<p>âœ… <strong>Cluster ã§ç™ºç”Ÿã—ãŸ Event ã‚’ã‚­ãƒ£ãƒ—ãƒãƒ£ã— Cloud Logging ã«é€ä¿¡ã™ã‚‹</strong></p>
<p>Kubetenes Clusterå†…éƒ¨ã§å®Ÿéš›ã«ç™ºç”Ÿã—ãŸEventã¯<code>kubectl get event</code>ã§å–å¾—å¯èƒ½ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">â¯ kubectl get event
</span></span><span class="line"><span class="cl">LAST SEEN   TYPE      REASON             OBJECT               MESSAGE
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">55s         Normal    ScalingReplicaSet  deployment/kube-dns  Scaled down replica <span class="nb">set</span> kube-dns-5bfd847c64 to <span class="m">1</span> from <span class="m">2</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ã—ã‹ã—ã€ã“ã‚Œã‚‰ã®Eventæƒ…å ±ã¯ç™ºç”Ÿã‹ã‚‰1æ™‚é–“å¾Œã«å‰Šé™¤ã•ã‚Œã¦ã—ã¾ã†ã€‚Clusterå†…éƒ¨ã®ç•°å¸¸ã«æ°—ã¥ãã€å¾Œã‹ã‚‰èª¿æŸ»ã—ã‚ˆã†ã¨æ€ã£ãŸã¨ãã«ã¯Eventã®ãƒ­ã‚°ãŒæ¶ˆãˆã¦ã„ãŸã€ã¨ãªã‚‹ã¨å¤§å¤‰ã ã€‚<br>
ãã“ã§<strong>event-exporter-gke</strong>ã®ç™»å ´ã€‚Eventæƒ…å ±ã‚’Loggingã«é€ä¿¡ã™ã‚‹ã“ã¨ã§å¾Œã‹ã‚‰ã§ã‚‚Eventæƒ…å ±ã‚’è¦‹ã‚‹ã“ã¨ãŒã§ãã€ä½•ã‚ˆã‚Šã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã‹ã‚‰å®¹æ˜“ã«æ¤œç´¢ãŒå¯èƒ½ã¨ãªã‚‹ã€‚</p>
<p><img src="https://blaaackard.com/p/gke-kubesystem-resource/logging.png"
	width="1177"
	height="514"
	srcset="https://blaaackard.com/p/gke-kubesystem-resource/logging_hu105c321fc49abb2bc50ed5c88a48ee4b_108766_480x0_resize_box_3.png 480w, https://blaaackard.com/p/gke-kubesystem-resource/logging_hu105c321fc49abb2bc50ed5c88a48ee4b_108766_1024x0_resize_box_3.png 1024w"
	loading="lazy"
	
		alt="Loggingã‚³ãƒ³ã‚½ãƒ¼ãƒ«ç”»é¢"
	
	
		class="gallery-image" 
		data-flex-grow="228"
		data-flex-basis="549px"
	
></p>
<p>ğŸš¨å…¬å¼docã«ã‚ˆã‚‹ã¨event-exporterã¯ãƒ™ã‚¹ãƒˆã‚¨ãƒ•ã‚©ãƒ¼ãƒˆæ–¹å¼ã§å‹•ä½œã™ã‚‹ãŸã‚ã€ã™ã¹ã¦ã®Eventã‚’ã‚­ãƒ£ãƒ—ãƒãƒ£ã§ãã‚‹ã¨ã¯é™ã‚‰ãªã„ã‚‰ã—ã„ã€‚ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã®éš›ã¯ã€Eventã«åŠ ãˆã¦Logsã¨Metricsã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ãŒæ¨å¥¨ã•ã‚Œã¦ã„ã‚‹ã€‚</p>
<p>å‚è€ƒ:<br>
<a class="link" href="https://cloud.google.com/stackdriver/docs/solutions/gke/managing-logs?hl=ja"  target="_blank" rel="noopener"
    >https://cloud.google.com/stackdriver/docs/solutions/gke/managing-logs?hl=ja</a></p>
<h3 id="konnectivity-agent">konnectivity-agent</h3>
<p>âœ… <strong>ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ãƒ—ãƒ¬ãƒ¼ãƒ³ã‹ã‚‰ã‚¯ãƒ©ã‚¹ã‚¿ã¸ã®é€šä¿¡ã‚’å®‰å…¨ã«</strong></p>
<p><strong>Konnectivity</strong> ã¯ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ãƒ—ãƒ¬ãƒ¼ãƒ³ã‹ã‚‰ã‚¯ãƒ©ã‚¹ã‚¿ã¸ã®é€šä¿¡ã« TCP ãƒ—ãƒ­ã‚­ã‚·ã‚’æä¾›ã™ã‚‹ã‚µãƒ¼ãƒ“ã‚¹ã§ã€ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ãƒ—ãƒ¬ãƒ¼ãƒ³å´ã«é…ç½®ã•ã‚ŒãŸ Konnectivity Serverã¨ã€ã‚¯ãƒ©ã‚¹ã‚¿å´ã« é…ç½®ã•ã‚ŒãŸKonnectivity Agentã®ï¼’ã¤ã®å½¹å‰²ã‹ã‚‰æ§‹æˆã•ã‚Œã¦ã„ã‚‹ã€‚<br>
Konnectivity ç™»å ´ä»¥å‰ã€ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ãƒ—ãƒ¬ãƒ¼ãƒ³ã‹ã‚‰ã‚¯ãƒ©ã‚¹ã‚¿å†…éƒ¨ã¸ã®é€šä¿¡ã«ã¯ã€ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã®æ‡¸å¿µãŒã‚ã‚‹ãƒ—ãƒ¬ãƒ¼ãƒ³HTTPã‚„ç¾åœ¨éæ¨å¥¨ã¨ãªã£ã¦ã„ã‚‹SSHãƒˆãƒ³ãƒãƒ«ãŒåˆ©ç”¨ã•ã‚Œã¦ã„ãŸãã†ã€‚Konnectivityç™»å ´å¾Œã€<strong>Kubernetes API Server ãŒã‚¯ãƒ©ã‚¹ã‚¿å†…éƒ¨ã«ç›´æ¥æ¥ç¶šã™ã‚‹ã“ã¨ãŒãªããªã£ãŸ</strong>ã“ã¨ã§ã€ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚­ãƒ³ã‚°ã®åˆ†é›¢ãŒå¯èƒ½ã«ãªã‚Šã€ãƒˆãƒ©ãƒ•ã‚£ãƒƒã‚¯ã‚’åˆ†å‰²ã—ã¦ç®¡ç†ã§ããŸã‚Šã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã®å¼·åŒ–ãŒã§ãã‚‹ã‚ˆã†ã«ãªã£ãŸã€‚</p>
<p><strong>konnectivity-agent-autoscaler</strong> ã¯ã€ä¸Šè¨˜ã® Konnectivity Agent ã®ã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°ã‚’åˆ¶å¾¡ã™ã‚‹ã‚‚ã®ã ã¨èªè­˜ã€‚</p>
<p>å‚è€ƒ:<br>
<a class="link" href="https://polar3130.hatenablog.com/entry/2023/05/26/173000"  target="_blank" rel="noopener"
    >https://polar3130.hatenablog.com/entry/2023/05/26/173000</a><br>
(å‚è€ƒã¨ã„ã†ã‹ã»ã¼å¼•ç”¨ã•ã›ã¦ã„ãŸã ãã¾ã—ãŸ)<br>
<a class="link" href="https://kubernetes.io/docs/concepts/architecture/control-plane-node-communication/#konnectivity-service"  target="_blank" rel="noopener"
    >https://kubernetes.io/docs/concepts/architecture/control-plane-node-communication/#konnectivity-service</a></p>
<h3 id="kube-dns">kube-dns</h3>
<p>âœ… <strong>GKE ã‚¯ãƒ©ã‚¹ã‚¿ã«å†…è”µã•ã‚Œã¦ã„ã‚‹ DNS ã‚µãƒ¼ãƒ</strong></p>
<p><strong>kube-dns</strong> ã¯ã€ã‚¯ãƒ©ã‚¹ã‚¿å†…ã®ã‚³ãƒ³ãƒ†ãƒŠãŒåå‰è§£æ±ºã§ãã‚‹ã‚ˆã†DNSã®è¨­å®šã‚’è¡Œã†ã‚¯ãƒ©ã‚¹ã‚¿å†…ã®DNSã‚µãƒ¼ãƒã§ã€Serviceã¨ã—ã¦å‹•ã„ã¦ã„ã‚‹ã€‚<br>
ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£å›³ã¯ä»¥ä¸‹ã€‚kube-dns Service ã¯ã€kube-dns Pod ã‚’ã‚°ãƒ«ãƒ¼ãƒ—åŒ–ã—ã¦ã€å˜ä¸€ã® IP ã‚¢ãƒ‰ãƒ¬ã‚¹ï¼ˆClusterIPï¼‰ã‚’å‰²ã‚ŠæŒ¯ã‚‹å½¹å‰²ã‚’æŒã£ã¦ãŠã‚Šã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯ã‚¯ãƒ©ã‚¹ã‚¿å†…ã®ã™ã¹ã¦ã® Pod ãŒã“ã® Service ã‚’ä½¿ç”¨ã—ã¦ DNS ã‚¯ã‚¨ãƒªã‚’è§£æ±ºã™ã‚‹ã€‚<br>
<strong>kube-dns-autoscaler</strong> ã¯ã€ã‚¯ãƒ©ã‚¹ã‚¿ã® DNS å‡¦ç†ã«å¯¾å¿œã§ãã‚‹ã‚ˆã†ã« kube-dns ã‚’ã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°ã™ã‚‹å½¹å‰²ã‚’æŒã£ã¦ã„ã‚‹ã€‚</p>
<p><img src="https://blaaackard.com/p/gke-kubesystem-resource/kube-dns.png"
	width="729"
	height="332"
	srcset="https://blaaackard.com/p/gke-kubesystem-resource/kube-dns_hu8c08fd8b2185451f1583140fee73e427_17040_480x0_resize_box_3.png 480w, https://blaaackard.com/p/gke-kubesystem-resource/kube-dns_hu8c08fd8b2185451f1583140fee73e427_17040_1024x0_resize_box_3.png 1024w"
	loading="lazy"
	
		alt="ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£(å…¬å¼docã‹ã‚‰å¼•ç”¨)"
	
	
		class="gallery-image" 
		data-flex-grow="219"
		data-flex-basis="526px"
	
></p>
<p>å„ Pod ã® DNS è¨­å®šã¯ <strong>kubelet</strong> ãŒè¡Œã£ã¦ãŠã‚Šã€kube-dns Service ã® IPã‚¢ãƒ‰ãƒ¬ã‚¹ã¯å„ã‚³ãƒ³ãƒ†ãƒŠå†…ã®<code>etc/resolv.conf</code>ã«è¨˜è¿°ã•ã‚Œã¦ã„ã‚‹ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">â¯ k get service kube-dns
</span></span><span class="line"><span class="cl">NAME       TYPE        CLUSTER-IP   EXTERNAL-IP   PORT<span class="o">(</span>S<span class="o">)</span>         AGE
</span></span><span class="line"><span class="cl">kube-dns   ClusterIP   10.8.0.10    &lt;none&gt;        53/UDP,53/TCP   9h
</span></span></code></pre></td></tr></table>
</div>
</div><p>nameserver ã« kube-dns ã® CLUSTER-IPã§ã‚ã‚‹<code>10.8.0.10</code>ãŒæ›¸ã„ã¦ã‚ã‚‹ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl"># cat /etc/resolv.conf
</span></span><span class="line"><span class="cl">search k8sgpt.svc.cluster.local svc.cluster.local cluster.local asia-northeast1-a.c.{hoge}.internal c.{hoge}.internal google.internal
</span></span><span class="line"><span class="cl">nameserver 10.8.0.10
</span></span><span class="line"><span class="cl">options ndots:5
</span></span></code></pre></td></tr></table>
</div>
</div><p>å‚è€ƒ:<br>
<a class="link" href="https://kubernetes.io/ja/docs/concepts/services-networking/dns-pod-service/"  target="_blank" rel="noopener"
    >https://kubernetes.io/ja/docs/concepts/services-networking/dns-pod-service/</a><br>
<a class="link" href="https://cloud.google.com/kubernetes-engine/docs/how-to/kube-dns?hl=ja"  target="_blank" rel="noopener"
    >https://cloud.google.com/kubernetes-engine/docs/how-to/kube-dns?hl=ja</a><br>
<a class="link" href="https://gadgeterkun.hatenablog.com/entry/20190630/1561864860"  target="_blank" rel="noopener"
    >https://gadgeterkun.hatenablog.com/entry/20190630/1561864860</a><br>
<a class="link" href="https://amateur-engineer-blog.com/kubernetes-dns/"  target="_blank" rel="noopener"
    >https://amateur-engineer-blog.com/kubernetes-dns/</a></p>
<h3 id="l7-default-backend">l7-default-backend</h3>
<p>âœ… <strong>Ingress Controller ã®ã“ã¨</strong></p>
<p>GKE ã§ã¯ã€Ingress ã¨ã„ã†ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã§ã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã« HTTP(S) ãƒˆãƒ©ãƒ•ã‚£ãƒƒã‚¯ã‚’ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã€‚
GKE Ingress Controller ã«ã‚ˆã£ã¦ Cloud HTTP(S) ãƒ­ãƒ¼ãƒ‰ãƒãƒ©ãƒ³ã‚µãŒä½œæˆã•ã‚Œã€Ingress ãŠã‚ˆã³é–¢é€£ã™ã‚‹ Service ã®æƒ…å ±ã«å¾“ã£ã¦æ§‹æˆã‚’è¡Œã†ã€‚ã“ã® Ingress Controller ã® Pod ãŒ  <strong>l7-default-backend</strong> ã§ã€GKEã‚¯ãƒ©ã‚¹ã‚¿ã® HTTP ãƒ­ãƒ¼ãƒ‰ãƒãƒ©ãƒ³ã‚·ãƒ³ã‚°ãŒã€Œæœ‰åŠ¹ã€ã«ãªã£ã¦ã„ã‚‹ã¨èµ·å‹•ã™ã‚‹ã€‚<br>
ã“ã® Ingress Controller ãŒ NEG(Network Endpoint Groups:<code>GCE_VM_IP_PORT</code>)ã‚’ä½œæˆã™ã‚‹ã“ã¨ã§ã€ã‚³ãƒ³ãƒ†ãƒŠã«å¯¾ã—ã¦ç›´æ¥è² è·åˆ†æ•£ã‚’è¡Œã†ã“ã¨ãŒå¯èƒ½ã¨ãªã‚Šã€å¾“æ¥ã«ãã‚‰ã¹ã¦ã‚³ãƒ³ãƒ†ãƒŠã«åˆ°é”ã™ã‚‹ã¾ã§ã®ãƒ›ãƒƒãƒ—æ•°ã‚’æ¸›ã‚‰ã—ã€ãƒ¬ã‚¤ãƒ†ãƒ³ã‚·ãƒ¼ã®å‘ä¸ŠãŒæœŸå¾…ã§ãã‚‹ã€Œã‚³ãƒ³ãƒ†ãƒŠãƒã‚¤ãƒ†ã‚£ãƒ–ã®è² è·åˆ†æ•£ã€ãŒã§ãã‚‹ã‚ˆã†ã«ãªã‚‹ã€‚</p>
<p><img src="https://blaaackard.com/p/gke-kubesystem-resource/lb-neg.png"
	width="1438"
	height="678"
	srcset="https://blaaackard.com/p/gke-kubesystem-resource/lb-neg_huc078f036485567769935fe3250a4d861_94919_480x0_resize_box_3.png 480w, https://blaaackard.com/p/gke-kubesystem-resource/lb-neg_huc078f036485567769935fe3250a4d861_94919_1024x0_resize_box_3.png 1024w"
	loading="lazy"
	
		alt="å…¬å¼docã‹ã‚‰å¼•ç”¨"
	
	
		class="gallery-image" 
		data-flex-grow="212"
		data-flex-basis="509px"
	
></p>
<p>ã©ã‚“ã©ã‚“è©±ãŒå¤§ãããªã‚Šãã†ãªã®ã§ä¸€æ—¦ã“ã“ã¾ã§ã€‚</p>
<p>å‚è€ƒ:<br>
<a class="link" href="https://cloud.google.com/kubernetes-engine/docs/concepts/ingress?hl=ja"  target="_blank" rel="noopener"
    >https://cloud.google.com/kubernetes-engine/docs/concepts/ingress?hl=ja</a><br>
<a class="link" href="https://cloud.google.com/kubernetes-engine/docs/concepts/container-native-load-balancing?hl=ja"  target="_blank" rel="noopener"
    >https://cloud.google.com/kubernetes-engine/docs/concepts/container-native-load-balancing?hl=ja</a><br>
<a class="link" href="https://qiita.com/ishii1648/items/a9804d96dea275ee28bd"  target="_blank" rel="noopener"
    >https://qiita.com/ishii1648/items/a9804d96dea275ee28bd</a></p>
<h3 id="metrics-server">metrics-server</h3>
<p>âœ… <strong>ã‚¯ãƒ©ã‚¹ã‚¿ã®ãƒªã‚½ãƒ¼ã‚¹ã‚’å–å¾—ã™ã‚‹</strong></p>
<p><strong>Metrics Server</strong> ã¯ Kubelet ã‹ã‚‰ã‚¯ãƒ©ã‚¹ã‚¿å†…ã®ãƒªã‚½ãƒ¼ã‚¹ä½¿ç”¨çŠ¶æ³ã‚’åé›†ã—ã€Metrics API ã‚’é€šã˜ã¦ Kubernetes Api Server ã§å…¬é–‹ã™ã‚‹ã€‚ãƒªã‚½ãƒ¼ã‚¹ä½¿ç”¨çŠ¶æ³ã‚’åé›†ã™ã‚‹ã“ã¨ã§ã€è‡ªå‹•ã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°ã‚„ãƒ‡ãƒãƒƒã‚°ãŒå®¹æ˜“ã«ãªã‚‹ã€‚</p>
<p>Metrics API ã«ã¯ <code>kubectl top</code>ã§ã‚¢ã‚¯ã‚»ã‚¹å¯èƒ½ã€‚<br>
<code>kubectl describe</code>ã‚³ãƒãƒ³ãƒ‰ã§ã¯ Pod ãŒç¢ºä¿ã—ãŸãƒªã‚½ãƒ¼ã‚¹ã‚’ç¢ºèªã§ãã‚‹ã®ã«å¯¾ã—ã€ã“ã¡ã‚‰ã®ã‚³ãƒãƒ³ãƒ‰ã¯<strong>å®Ÿéš›ã« Pod å†…ã®ã‚³ãƒ³ãƒ†ãƒŠãŒä½¿ç”¨ã—ã¦ã„ã‚‹ãƒªã‚½ãƒ¼ã‚¹ã®ä½¿ç”¨é‡</strong>ãŒç¢ºèªã§ãã‚‹ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">â¯ kubectl top pod -n kube-system
</span></span><span class="line"><span class="cl">NAME                                                          CPU<span class="o">(</span>cores<span class="o">)</span>   MEMORY<span class="o">(</span>bytes<span class="o">)</span>
</span></span><span class="line"><span class="cl">event-exporter-gke-7bf6c99dcb-ddh8w                           1m           20Mi
</span></span><span class="line"><span class="cl">fluentbit-gke-sdpcc                                           6m           23Mi
</span></span><span class="line"><span class="cl">...
</span></span></code></pre></td></tr></table>
</div>
</div><p>å‚è€ƒ:<br>
<a class="link" href="https://github.com/kubernetes-sigs/metrics-server"  target="_blank" rel="noopener"
    >https://github.com/kubernetes-sigs/metrics-server</a><br>
<a target="_blank" href="https://www.amazon.co.jp/Kubernetes%25E5%25AE%258C%25E5%2585%25A8%25E3%2582%25AC%25E3%2582%25A4%25E3%2583%2589-%25E7%25AC%25AC2%25E7%2589%2588-Top-Gear-%25E9%259D%2592%25E5%25B1%25B1/dp/4295009792?&_encoding=UTF8&tag=blaaackard04-22&linkCode=ur2&linkId=2ff724fb2dfe8348672a1ebc4673ed32&camp=247&creative=1211">Kuberneteså®Œå…¨ã‚¬ã‚¤ãƒ‰ ç¬¬2ç‰ˆ (Top Gear)</a></p>
<h2 id="daemonset">Daemonset</h2>
<p>å…¨ã¦ã® Node ã§å‹•ãã¹ã Pod ã‚’å®šç¾©ã™ã‚‹ã®ãŒ Daemonset ã€‚<br>
ç›£è¦–ã‚„ãƒ­ã‚°åé›†ã‚’è¡Œã†ãƒ‡ãƒ¼ãƒ¢ãƒ³ç­‰ãŒã‚ã‚Šã¾ã™ã€‚è»½ãè§¦ã‚Œã¦ã„ãã¾ã™ã€‚</p>
<h3 id="fluentbit-gke">fluentbit-gke</h3>
<p>âœ… <strong>å„ Node ã®ã‚³ãƒ³ãƒ†ãƒŠãƒ­ã‚°ã‚’ Cloud Logging ã«è»¢é€ã™ã‚‹</strong></p>
<p>GKE ã‚¯ãƒ©ã‚¹ã‚¿ã‚’ä½œæˆã™ã‚‹ã¨ã€Cloud Logging ãŠã‚ˆã³ Cloud Monitoring ã¨ Cloud Operations for GKE ã¨ã®ã‚¤ãƒ³ãƒ†ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãŒãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§æœ‰åŠ¹ã«ãªã‚‹ã€‚<br>
ã‚·ã‚¹ãƒ†ãƒ ãƒ­ã‚°ã¨ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ ãƒ­ã‚°ã¯ã€Cloud Logging ã®ãƒ­ã‚°ãƒ«ãƒ¼ã‚¿ãƒ¼ã«é…ä¿¡ã•ã‚Œã€Cloud Logging ã«å–ã‚Šè¾¼ã¾ã‚Œã‚‹ã‹ã€é™¤å¤–ã•ã‚Œã‚‹ã‹ã€BigQueryã€Pub/Subã€Cloud Storage ç­‰ã«ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã•ã‚Œã‚‹ã€‚<br>
ã‚·ã‚¹ãƒ†ãƒ  ãƒ­ã‚®ãƒ³ã‚°ã‚’æœ‰åŠ¹ã«ã™ã‚‹ã¨ã€fluentbit ãƒ™ãƒ¼ã‚¹ã®å°‚ç”¨ã® Logging ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã§ã‚ã‚‹ <strong>fluentbit-gke</strong> ãŒ å„ãƒãƒ¼ãƒ‰ã«è‡ªå‹•çš„ã«ãƒ‡ãƒ—ãƒ­ã‚¤ã•ã‚Œã€ãƒ­ã‚°ã‚’ Cloud Logging ã«é€ä¿¡ã™ã‚‹ã€‚</p>
<p>GKE Standard ã«ãŠã‘ã‚‹ Node ã‚ãŸã‚Šã® Pod æ•°ä¸Šé™ã¯ 110  ã ã£ãŸãŒã€2022 å¹´ 8 æœˆã®ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã§ 256 ã¾ã§å¼•ãä¸Šã’ã‚‰ã‚ŒãŸã€‚ <strong>fluentbit-gke-256pd</strong> ã¯ãã‚Œã«å¯¾å¿œã™ã‚‹ã‚‚ã®ã¨ã„ã†èªè­˜ã€‚<br>
ã„ãšã‚Œã‹ã® GKE ãƒãƒ¼ãƒ‰ã§ 1 ç§’ã‚ãŸã‚Š 100 KiB ã‚’è¶…ãˆã‚‹ãƒ­ã‚° ã‚¹ãƒ«ãƒ¼ãƒ—ãƒƒãƒˆãŒå¿…è¦ãªå ´åˆã¯ã€é«˜ã‚¹ãƒ«ãƒ¼ãƒ—ãƒƒãƒˆç‰ˆã® <strong>fluentbit-gke-max</strong> ã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã§ã€ãƒãƒ¼ãƒ‰ã”ã¨ã« 1 ç§’ã‚ãŸã‚Š 10 MiB ã¨ã„ã†é«˜ã‚¹ãƒ«ãƒ¼ãƒ—ãƒƒãƒˆã‚’å®Ÿç¾ã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã€‚</p>
<p>å‚è€ƒ:<br>
<a class="link" href="https://cloud.google.com/stackdriver/docs/solutions/gke/managing-logs?hl=ja"  target="_blank" rel="noopener"
    >https://cloud.google.com/stackdriver/docs/solutions/gke/managing-logs?hl=ja</a><br>
<a class="link" href="https://polar3130.hatenablog.com/entry/2022/08/18/180500"  target="_blank" rel="noopener"
    >https://polar3130.hatenablog.com/entry/2022/08/18/180500</a><br>
<a class="link" href="https://polar3130.hatenablog.com/entry/2022/09/21/090000"  target="_blank" rel="noopener"
    >https://polar3130.hatenablog.com/entry/2022/09/21/090000</a></p>
<h3 id="gke-metrics-agent">gke-metrics-agent</h3>
<p>âœ… <strong>Cloud Monitoring ã«ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã‚’é€ä¿¡ã™ã‚‹</strong></p>
<p>Cloud Monitoring ã«ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã‚’å–ã‚Šè¾¼ã‚€ã“ã¨ã§ã€ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã§ã®è¡¨ç¤ºã‚„ã‚¢ãƒ©ãƒ¼ãƒˆã®ç”Ÿæˆã‚’è¡Œã†ã“ã¨ãŒã§ãã‚‹ã€‚<strong>gke-metrics-agent</strong> ã¯å„ãƒãƒ¼ãƒ‰ã®ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã‚’ Cloud Monitoring ã«é€ä¿¡ã™ã‚‹å½¹å‰²ã‚’æŒã¤ã€‚<br>
gke-metrics-agent-scaling-10 ã‚„ gke-metrics-agent-scaling-100 ãŒã‚ã‚‹ãŒã€æ•°å­—ã¯è¿½åŠ ã™ã‚‹ãƒ¡ãƒ¢ãƒªé‡(MB)ã‚’è¡¨ã—ã¦ã„ã‚‹ã€‚</p>
<p>å‚è€ƒ:<br>
<a class="link" href="https://cloud.google.com/stackdriver/docs/solutions/gke/managing-metrics?hl=ja"  target="_blank" rel="noopener"
    >https://cloud.google.com/stackdriver/docs/solutions/gke/managing-metrics?hl=ja</a></p>
<h3 id="kube-proxy">kube-proxy</h3>
<p>âœ… <strong>Service ãƒªã‚½ãƒ¼ã‚¹ã‚’ç›£è¦–ã—ã€ãƒãƒ¼ãƒ‰ã®ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯è¨­å®šã‚’è¡Œã†</strong></p>
<p><strong>kube-proxy</strong> ã¯ kubelet ã¨åŒã˜ãã€å„Nodeä¸Šã§å‹•ä½œã™ã‚‹ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã€‚Service ãƒªã‚½ãƒ¼ã‚¹ã®ä½œæˆ/æ›´æ–°/å‰Šé™¤ã‚’æ¤œçŸ¥ã—ãŸéš›ã«ã€Node ã®ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯è¨­å®šã‚’è¡Œã†ã“ã¨ã§ã€ ClusterIP ã‚„ NodePort å®›ã®ãƒˆãƒ©ãƒ•ã‚£ãƒƒã‚¯ãŒ Pod ã«æ­£å¸¸ã«è»¢é€ã•ã‚Œã‚‹ã‚ˆã†ã«ã™ã‚‹ã€‚<br>
3ã¤ã®è»¢é€æ–¹å¼ãŒã‚ã‚‹ãŒã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¯ iptables ã‚’æ§‹æˆã™ã‚‹ iptables ãƒ¢ãƒ¼ãƒ‰ã€‚<br>
ä»¥ä¸‹å‚è€ƒãƒšãƒ¼ã‚¸ãŒã‚ã‹ã‚Šã‚„ã™ã„ã€‚</p>
<p>å‚è€ƒ:
<a class="link" href="https://qiita.com/nozmiz/items/9a74433258a79be26c36"  target="_blank" rel="noopener"
    >https://qiita.com/nozmiz/items/9a74433258a79be26c36</a><br>
<a class="link" href="https://recruit.gmo.jp/engineer/jisedai/blog/kubernetes_service/"  target="_blank" rel="noopener"
    >https://recruit.gmo.jp/engineer/jisedai/blog/kubernetes_service/</a></p>
<h3 id="metadata-proxy">metadata-proxy</h3>
<p>âœ… <strong>ã‚³ãƒ³ãƒ†ãƒŠãƒ¯ãƒ¼ã‚¯ãƒ­ãƒ¼ãƒ‰ã«éš è”½ã•ã‚ŒãŸãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã‚’æä¾›ã™ã‚‹</strong></p>
<p>GKE ã§ã¯ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã‚’ä½¿ç”¨ã—ã¦ VM ã‚’æ§‹æˆã™ã‚‹ãŒã€ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã®ä¸€éƒ¨ã¯æ©Ÿå¯†æ€§ãŒé«˜ãã‚¯ãƒ©ã‚¹ã‚¿ã§å®Ÿè¡Œä¸­ã®ãƒ¯ãƒ¼ã‚¯ãƒ­ãƒ¼ãƒ‰ã‹ã‚‰ä¿è­·ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã€‚<br>
<strong>metadata-proxy</strong>ã¯ã“ã®å½¹å‰²ã‚’æŒã¤ã‚‚ã®ã ãŒã€ç¾åœ¨ã§ã¯ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿éš è”½ã¯éæ¨å¥¨ã¨ãªã£ã¦ãŠã‚Šã€<strong>Workload Identity</strong> ã‚’ä½¿ã†ã“ã¨ãŒæ¨å¥¨ã•ã‚Œã¦ã„ã‚‹ã€‚</p>
<p>å‚è€ƒ:<br>
<a class="link" href="https://cloud.google.com/kubernetes-engine/docs/how-to/protecting-cluster-metadata?hl=ja"  target="_blank" rel="noopener"
    >https://cloud.google.com/kubernetes-engine/docs/how-to/protecting-cluster-metadata?hl=ja</a><br>
<a class="link" href="https://github.com/GoogleCloudPlatform/k8s-metadata-proxy"  target="_blank" rel="noopener"
    >https://github.com/GoogleCloudPlatform/k8s-metadata-proxy</a></p>
<h3 id="nccl-fastsocket-installer">nccl-fastsocket-installer</h3>
<p>âœ… <strong>NVIDIAãŒæä¾›ã™ã‚‹ãƒãƒ«ãƒGPUå‘ã‘ã®é›†åˆé€šä¿¡ã®ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã‚’å‘ä¸Šã•ã›ã‚‹</strong></p>
<p>NCCLã¯ã€NVIDIAãŒæä¾›ã™ã‚‹ãƒãƒ«ãƒGPUå‘ã‘ã®é›†åˆé€šä¿¡ç”¨ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§ã€TensorFlow ã‚„ PyTorch ãªã©ã®ãƒ‡ã‚£ãƒ¼ãƒ—ãƒ©ãƒ¼ãƒ‹ãƒ³ã‚°ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã§ãƒãƒ«ãƒ GPU ã‚„ãƒãƒ«ãƒãƒãƒ¼ãƒ‰ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°ã‚’è¡Œã†å ´åˆã«ä½¿ç”¨ã•ã‚Œã‚‹ã€‚<br>
<strong>nccl-fastsocket-installer</strong> ã¯ã€ã“ã‚Œã‚‰ã®ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã‚’å‘ä¸Šã•ã›ã‚‹ãƒˆãƒ©ãƒ³ã‚¹ãƒãƒ¼ãƒˆå±¤ã®ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚‰ã—ã„ã€‚</p>
<p>å‚è€ƒ:<br>
<a class="link" href="https://github.com/google/nccl-fastsocket"  target="_blank" rel="noopener"
    >https://github.com/google/nccl-fastsocket</a>
<a class="link" href="https://cloud.google.com/compute/docs/gpus/optimize-gpus?hl=ja#fast-socket"  target="_blank" rel="noopener"
    >https://cloud.google.com/compute/docs/gpus/optimize-gpus?hl=ja#fast-socket</a></p>
<h3 id="nvidia-gpu-device-plugin">nvidia-gpu-device-plugin</h3>
<p>âœ… <strong>NVIDIAè£½ã®GPUã‚’ã‚¯ãƒ©ã‚¹ã‚¿ã§ä½¿ãˆã‚‹ã‚ˆã†ã«ã™ã‚‹</strong></p>
<p>Device Plugins ã¨ã¯æ§˜ã€…ãªãƒãƒ¼ãƒ‰ã‚¦ã‚§ã‚¢ã‚’ kubelet ã«è¦‹ã›ã‚‹ãŸã‚ã®ä»•çµ„ã¿ã€‚<br>
GKEä¸Šã§ã¯ã€NVIDIA TeslaÂ® GPUï¼ˆK80ã€P100ã€P4ã€V100ã€T4ã€L4ã€A100ï¼‰ã‚’è£…å‚™ã—ãŸãƒãƒ¼ãƒ‰ãƒ—ãƒ¼ãƒ«ã‚’ä½œæˆã™ã‚‹ã“ã¨ãŒã§ãã€ç”»åƒèªè­˜ã‚„è‡ªç„¶è¨€èªå‡¦ç†ç­‰ã®ãƒ‡ã‚£ãƒ¼ãƒ—ãƒ©ãƒ¼ãƒ‹ãƒ³ã‚°ã«å¿…è¦ãªè¨ˆç®—èƒ½åŠ›ã‚’æä¾›ã™ã‚‹ã€‚
<strong>nvidia-gpu-device-plugin</strong> ã¯GKEä¸Šã§ NVIDIA è£½ã® GPU ã‚’å®Ÿè¡Œã™ã‚‹ãŸã‚ã«å¿…è¦ãª plugin ã€‚</p>
<p>å‚è€ƒ:<br>
<a class="link" href="https://cloud.google.com/kubernetes-engine/docs/how-to/gpus?hl=ja"  target="_blank" rel="noopener"
    >https://cloud.google.com/kubernetes-engine/docs/how-to/gpus?hl=ja</a><br>
<a class="link" href="https://speakerdeck.com/extendwings/device-pluginkai-fa-ru-men"  target="_blank" rel="noopener"
    >https://speakerdeck.com/extendwings/device-pluginkai-fa-ru-men</a><br>
<a class="link" href="https://kubernetes.io/ja/docs/tasks/manage-gpus/scheduling-gpus/"  target="_blank" rel="noopener"
    >https://kubernetes.io/ja/docs/tasks/manage-gpus/scheduling-gpus/</a></p>
<h3 id="pdcsi-node">pdcsi-node</h3>
<p>âœ… <strong>Compute Engine æ°¸ç¶šãƒ‡ã‚£ã‚¹ã‚¯ã® CSI ãƒ‰ãƒ©ã‚¤ãƒ</strong></p>
<p>GKE ã‚’ä½¿ç”¨ã™ã‚‹ã¨ã‚¯ãƒ©ã‚¹ã‚¿ã¸ç°¡å˜ã‹ã¤è‡ªå‹•çš„ã« Compute Engine æ°¸ç¶šãƒ‡ã‚£ã‚¹ã‚¯ Container Storage Interfaceï¼ˆCSIï¼‰ãƒ‰ãƒ©ã‚¤ãƒã‚’ãƒ‡ãƒ—ãƒ­ã‚¤ã—ã¦ç®¡ç†ã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã€‚æ¨™æº–ã‚¯ãƒ©ã‚¹ã‚¿ã§ã¯ã€Compute Engine æ°¸ç¶šãƒ‡ã‚£ã‚¹ã‚¯ã® CSI ãƒ‰ãƒ©ã‚¤ãƒã‚’æœ‰åŠ¹ã«ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã€‚</p>
<p>è©³ã—ãèª¿ã¹ã¦ãªã„ãŒã€<code>csi-node-driver-registrar</code>ã¨<code>gcp-compute-persistent-disk-csi-driver</code>ã¨ã„ã† Image ãŒä½¿ã‚ã‚Œã¦ã„ã‚‹ã“ã¨ã‹ã‚‰ã€ã“ã‚Œã‚‰ã«é–¢é€£ã™ã‚‹ãƒªã‚½ãƒ¼ã‚¹ã ã¨æ€ã‚ã‚Œã‚‹ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">â¯ kubectl describe daemonsets pdcsi-node --namespace<span class="o">=</span>kube-system
</span></span><span class="line"><span class="cl">...
</span></span><span class="line"><span class="cl">Pod Template:
</span></span><span class="line"><span class="cl">  Labels:           k8s-app<span class="o">=</span>gcp-compute-persistent-disk-csi-driver
</span></span><span class="line"><span class="cl">  Annotations:      components.gke.io/component-name: pdcsi
</span></span><span class="line"><span class="cl">                    components.gke.io/component-version: 0.16.14
</span></span><span class="line"><span class="cl">  Service Account:  pdcsi-node-sa
</span></span><span class="line"><span class="cl">  Containers:
</span></span><span class="line"><span class="cl">   csi-driver-registrar:
</span></span><span class="line"><span class="cl">    Image:      gke.gcr.io/csi-node-driver-registrar:v2.8.0-gke.4@sha256:715a1581ce158fbf95f7ca351e25c7d6a0a1599e46e270e72238cc8a0aef1c43
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">   gce-pd-driver:
</span></span><span class="line"><span class="cl">    Image:      gke.gcr.io/gcp-compute-persistent-disk-csi-driver:v1.10.7-gke.0@sha256:a3e4af6b6f6999427dc7b02e813aa1ca5f26e73357c92a77b8fe774ddf431a26
</span></span></code></pre></td></tr></table>
</div>
</div><p>è©³ã—ãã¯ä»¥ä¸‹ã®å‚è€ƒãƒšãƒ¼ã‚¸ã€‚</p>
<p>å‚è€ƒ:<br>
<a class="link" href="https://cloud.google.com/kubernetes-engine/docs/how-to/persistent-volumes/gce-pd-csi-driver?hl=ja"  target="_blank" rel="noopener"
    >https://cloud.google.com/kubernetes-engine/docs/how-to/persistent-volumes/gce-pd-csi-driver?hl=ja</a><br>
<a class="link" href="https://github.com/kubernetes-sigs/gcp-compute-persistent-disk-csi-driver"  target="_blank" rel="noopener"
    >https://github.com/kubernetes-sigs/gcp-compute-persistent-disk-csi-driver</a></p>
<h3 id="runsc-metric-server">runsc-metric-server</h3>
<p>ã‚ã¾ã‚Šè‰¯ãã‚ã‹ã£ã¦ãªã„ãŒã€ä»¥ä¸‹ã®å‚è€ƒã‚µã‚¤ãƒˆã¨é–¢é€£ã‚ã‚Šãã†ã€‚</p>
<p>å‚è€ƒ:<br>
<a class="link" href="https://gvisor.dev/docs/user_guide/observability/"  target="_blank" rel="noopener"
    >https://gvisor.dev/docs/user_guide/observability/</a></p>
<h3 id="tpu-device-plugin">tpu-device-plugin</h3>
<p>èª¿ã¹ã¦ã‚‚ã‚ã¾ã‚Šæƒ…å ±ãŒå‡ºã¦ã“ãªã‹ã£ãŸãŒã€nvidia-gpu-device-plugin ã¨åŒæ§˜ã« GKEä¸Šã§ TPU ã‚’å®Ÿè¡Œã—ãŸã„å ´åˆã«å¿…è¦ãª plugin ã ã¨èªè­˜ã€‚</p>
<h1 id="ã¾ã¨ã‚">ã¾ã¨ã‚</h1>
<p>ä»Šå›ã¯ Namespace ã€Œkube-systemã€ ã«ã‚ã‚‹ãƒªã‚½ãƒ¼ã‚¹ãŒã©ã®ã‚ˆã†ãªå½¹å‰²ã‚’æŒã£ã¦ã„ã‚‹ã®ã‹ãƒ¡ãƒ¢ãƒ™ãƒ¼ã‚¹ã§ã¾ã¨ã‚ã¦ã¿ã¾ã—ãŸã€‚ãªã‚“ã¨ãªãã®ç†è§£ãŒãƒãƒƒã‚­ãƒªã—ãŸç†è§£ã«å¤‰ã‚ã£ãŸã‚Šã€æ–°ã—ãå¾—ãŸçŸ¥è­˜ã‚‚ã‚ã‚Šã¾ã—ãŸã€‚<br>
ã¾ã ã¾ã åˆ†ã‹ã‚‰ãªã„ã“ã¨ã ã‚‰ã‘ã§ã™ãŒä¸€ã¤ãšã¤æ½°ã—ã¦ã„ããŸã„ã§ã™ã€‚<br>
ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã—ãŸã€‚</p>

</section>


    <footer class="article-footer">
    
    <section class="article-tags">
        
            <a href="https://blaaackard.com/tags/kubernetes/">Kubernetes</a>
        
            <a href="https://blaaackard.com/tags/google-cloud/">Google Cloud</a>
        
            <a href="https://blaaackard.com/tags/gke/">GKE</a>
        
    </section>


    
    <section class="article-copyright">
        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <path d="M14.5 9a3.5 4 0 1 0 0 6" />
</svg>



        <span>Licensed under CC BY-NC-SA 4.0</span>
    </section>
    </footer>


    
        <link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/katex@0.15.6/dist/katex.min.css"integrity="sha256-J&#43;iAE0sgH8QSz9hpcDxXIftnj65JEZgNhGcgReTTK9s="crossorigin="anonymous"
            ><script 
                src="https://cdn.jsdelivr.net/npm/katex@0.15.6/dist/katex.min.js"integrity="sha256-InsNdER1b2xUewP&#43;pKCUJpkhiqwHgqiPXDlIk7GzBu4="crossorigin="anonymous"
                defer
                >
            </script><script 
                src="https://cdn.jsdelivr.net/npm/katex@0.15.6/dist/contrib/auto-render.min.js"integrity="sha256-y39Mpg7V3D4lhBX4x6O0bUqTV4pSrfgwEfGKfxkOdgI="crossorigin="anonymous"
                defer
                >
            </script><script>
    window.addEventListener("DOMContentLoaded", () => {
        renderMathInElement(document.querySelector(`.article-content`), {
            delimiters: [
                { left: "$$", right: "$$", display: true },
                { left: "$", right: "$", display: false },
                { left: "\\(", right: "\\)", display: false },
                { left: "\\[", right: "\\]", display: true }
            ],
            ignoredClasses: ["gist"]
        });})
</script>
    
</article>

    

    

<aside class="related-content--wrapper">
    <h2 class="section-title">Related content</h2>
    <div class="related-content">
        <div class="flex article-list--tile">
            
                
<article class="has-image">
    <a href="https://blaaackard.com/p/k8s-gpt/">
        
        
            <div class="article-image">
                <img src="https://blaaackard.com/p/k8s-gpt/cover.fe6da3c89991d87dc3e8cd29550c6579_hu19669f3980519f16624bf304411b5ba5_1909883_250x150_fill_box_smart1_3.png" 
                        width="250" 
                        height="150" 
                        loading="lazy"
                        alt="Featured image of post K8sGPTã‚’ä½¿ã£ã¦ã‚¯ãƒ©ã‚¹ã‚¿ã®AIåˆ†æã‚’ã—ã¦ã¿ã‚ˆã†"
                        data-key="k8s-gpt" 
                        data-hash="md5-/m2jyJmR2H3D6M0pVQxleQ==">
                
            </div>
        

        <div class="article-details">
            <h2 class="article-title">K8sGPTã‚’ä½¿ã£ã¦ã‚¯ãƒ©ã‚¹ã‚¿ã®AIåˆ†æã‚’ã—ã¦ã¿ã‚ˆã†</h2>
        </div>
    </a>
</article>

            
        </div>
    </div>
</aside>

     
    
        
    

    <footer class="site-footer">
    <section class="copyright">
        &copy; 
        
            2020 - 
        
        2023 Penta&#39;s TechBlog
    </section>
    
    <section class="powerby">
        Built with <a href="https://gohugo.io/" target="_blank" rel="noopener">Hugo</a> <br />
        Theme <b><a href="https://github.com/CaiJimmy/hugo-theme-stack" target="_blank" rel="noopener" data-version="3.20.0">Stack</a></b> designed by <a href="https://jimmycai.com" target="_blank" rel="noopener">Jimmy</a>
    </section>
</footer>


    
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    
    <div class="pswp__bg"></div>

    
    <div class="pswp__scroll-wrap">

        
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                
                
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo="crossorigin="anonymous"
                defer
                >
            </script><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU="crossorigin="anonymous"
                defer
                >
            </script><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css"crossorigin="anonymous"
            ><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css"crossorigin="anonymous"
            >

            </main>
        </div>
        <script 
                src="https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js"integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z&#43;KMkF24hUW8WePSA9HM="crossorigin="anonymous"
                
                >
            </script><script type="text/javascript" src="https://blaaackard.com/ts/main.js" defer></script>
<script>
    (function () {
        const customFont = document.createElement('link');
        customFont.href = "https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap";

        customFont.type = "text/css";
        customFont.rel = "stylesheet";

        document.head.appendChild(customFont);
    }());
</script>

    </body>
</html>
